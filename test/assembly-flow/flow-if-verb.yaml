# This file contains testcases for the 'if' policy. The 'if' policy is used to
# test the request verb and generate different reponses accordingly.

context:
  request.verb: ${request.method}

assembly:
  execute:
    - message-mediation:
        target: context.response
        value: "{ status: 200, message: '(unknown)' }"

    - if:
        condition: "'$(request.verb)' === 'POST'"
        execute:
          - message-mediation:
              target: context.response
              value: "{ status: 200, message: 'This is a POST response' }"

    - if:
        condition: "'$(request.verb)' === 'GET'"
        execute:
          - message-mediation:
              target: context.response
              value: "{ status: 200, message: 'This is a GET response' }"

    - response:
        payload: context.response
